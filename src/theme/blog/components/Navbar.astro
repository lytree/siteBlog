---
import { url } from '../utils/url-utils'
const className = Astro.props.class
const items = [
  {
    key: 'index',
    label: '首页',
    icon: 'pi icon-[material-symbols--home]',
    url: '/blog/'
  },
  {
    key: 'archive',
    label: '归档',
    icon: 'pi icon-[material-symbols--archive]',
    url: '/blog/archive/'
  },
  // {
  //     key: "category",
  //     label: "分类",
  //     icon: "pi i-material-symbols-category",
  //     url: "/blog/category"
  // },
  // {
  //     key: "tag",
  //     label: "标签",
  //     icon: "pi i-material-symbols-tag",
  //     url: "/blog/tag"
  // },
  {
    key: 'about',
    label: '关于',
    icon: 'pi icon-[material-symbols--person]',
    url: '/blog/about/'
  }
];
---
<div id="navbar" class="z-50 onload-animation">
    <div class="absolute h-8 left-0 right-0 -top-8 bg-[var(--card-bg)] transition"></div> <!-- used for onload animation -->
    <nav class="card-base overflow-visible max-w-[var(--page-width)] h-[4.25rem] rounded-t-none px-4">
        <div class="mx-auto flex max-w-screen-xl flex-wrap items-center justify-between p-4">
          <a href="/blog/" class="flex items-center space-x-3 rtl:space-x-reverse">
            <!-- <img src="https://flowbite.com/docs/images/logo.svg" class="h-8" alt="Flowbite Logo" /> -->
            <span class="self-center whitespace-nowrap text-2xl font-semibold dark:text-white">{"杨柳亭"}</span>
          </a>
          <div class="flex md:order-2">
            <button
              type="button"
              data-collapse-toggle="navbar-search"
              aria-controls="navbar-search"
              aria-expanded="false"
              class="me-1 rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700"
            >
              <svg class="h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"></path>
              </svg>
              <span class="sr-only">Search</span>
            </button>
            <!-- <div class="relative hidden md:block">
              <div class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3">
                <svg class="h-4 w-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"></path>
                </svg>
                <span class="sr-only">Search icon</span>
              </div>
              <input
                type="text"
                id="search-navbar"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 ps-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
                placeholder="Search..."
              />
            </div> -->
            <button
              data-collapse-toggle="navbar-search"
              type="button"
              class="inline-flex h-10 w-10 items-center justify-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden"
              aria-controls="navbar-search"
              aria-expanded="false"
            >
              <span class="sr-only">Open main menu</span>
              <svg class="h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path>
              </svg>
            </button>
          </div>
          <div class="hidden w-full bg-[var(--card-bg)] items-center justify-between md:order-1 md:flex md:w-auto" id="navbar-search">
            <ul
              class="mx-auto mt-4 flex flex-col rounded-b-lg border border-gray-100  p-4 font-medium dark:border-gray-700 md:mt-0 md:flex-row md:space-x-8 md:border-0 md:p-0  rtl:space-x-reverse"
            >
              {
                items.map((item, index) => (
                  <li>
                    <a
                      href={item.url}
                      class="block rounded px-3 py-2  hover:bg-gray-100 dark:border-gray-700  dark:hover:bg-gray-700 dark:hover:text-white md:p-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
                      }
                    >
                      <div class="text-md flex flex-row items-center text-[var(--primary)]">
                        <span class="mb-1 mr-2 text-[1.75rem]" class:list={[item.icon]} />
                        {item.label}
                      </div>
                    </a>
                  </li>
                ))
              }
            </ul>
          </div>
        </div>
    </nav>
</div>

<style lang="scss" is:global>
</style>

{import.meta.env.PROD && <script is:inline define:vars={{scriptUrl: url('/pagefind/pagefind.js')}}>
async function loadPagefind() {
    const pagefind = await import(scriptUrl)
    await pagefind.options({
        'excerptLength': 20
    })
    pagefind.init()
    window.pagefind = pagefind
    pagefind.search('')     // speed up the first search
}
loadPagefind()
</script>
}